{{ define "main" }}
  {{ $style := resources.Get "css/papers.css" | resources.Minify }}
  <style>{{ $style.Content | safeCSS }}</style>

  <main class="paper-detail">
    <a class="paper-detail__back" href="{{ "/" | relLangURL }}">← Back to papers</a>

    <header class="paper-hero">
      <div class="paper-hero__heading">
        <p class="paper__venue pill pill--ghost">
          {{ with .Params.publication_short }}{{ . }}{{ else }}{{ .Params.publication }}{{ end }}
          · {{ .Date.Format "2006" }}
        </p>
        <h1 class="paper__title">{{ .Title }}</h1>

        {{ $authors := slice }}
        {{ range .Params.authors }}
          {{- with site.GetPage (printf "authors/%s" .) -}}
            {{ $authors = $authors | append .Title }}
          {{- else -}}
            {{ $authors = $authors | append . }}
          {{- end -}}
        {{ end }}
        <p class="paper__authors">{{ delimit $authors ", " }}</p>
      </div>

    </header>

    <section class="paper-detail__meta-grid">
      {{ with .Params.hugoblox.ids.doi }}
        <div class="meta-card">
          <p class="meta-card__label">DOI</p>
          <a href="https://doi.org/{{ . }}" target="_blank" rel="noopener">{{ . }}</a>
        </div>
      {{ end }}
      {{ with .Params.hugoblox.ids.arxiv }}
        <div class="meta-card">
          <p class="meta-card__label">arXiv</p>
          <a href="https://arxiv.org/abs/{{ . }}" target="_blank" rel="noopener">{{ . }}</a>
        </div>
      {{ end }}
      <div class="meta-card">
        <p class="meta-card__label">Published</p>
        <p>{{ .Date.Format "2006-01-02" }}</p>
      </div>
    </section>

    {{ with .Params.summary }}
      <section class="paper-detail__summary">
        <strong>Summary</strong>
        <p>{{ . }}</p>
      </section>
    {{ end }}

    {{ with .Params.links }}
      <div class="paper-detail__links-list">
        {{ range . }}
          {{ if .url }}
            <a class="pill pill--outline" href="{{ .url }}" target="_blank" rel="noopener">
              {{ if .type }}{{ upper .type }}{{ else }}LINK{{ end }}
            </a>
          {{ end }}
        {{ end }}
      </div>
    {{ end }}

    <div class="paper__content">
      {{ .Content }}
    </div>
  </main>
{{ end }}
